# TypeScript - Production
# Strict checks for production-grade code

# =============================================================================
# ESLint
# =============================================================================

[code.linting.eslint]
enabled = true
ignore = ["**/dist/**", "**/node_modules/**", "**/build/**"]
max-warnings = 0

[code.linting.eslint.rules]

# Code quality limits
"max-depth" = { severity = "error", max = 4 }
"max-params" = { severity = "error", max = 4 }
"max-lines-per-function" = "error"
"max-lines" = "error"
"complexity" = "error"
"no-console" = { severity = "error", allow = ["error", "warn"] }

# Core ESLint - Best practices
"eqeqeq" = "error"
"curly" = "error"
"prefer-const" = "error"
"no-var" = "error"

# Core ESLint - Security
"no-eval" = "error"
"no-implied-eval" = "error"

# Core ESLint - Bug prevention
"array-callback-return" = "error"
"no-template-curly-in-string" = "error"
"consistent-return" = "error"

# Import plugin
"import/no-cycle" = { severity = "error", maxDepth = 10 }

# TypeScript-ESLint - Type safety
"@typescript-eslint/no-unused-vars" = "error"
"@typescript-eslint/no-explicit-any" = "error"
"@typescript-eslint/no-non-null-assertion" = "error"
"@typescript-eslint/no-unnecessary-condition" = "error"
"@typescript-eslint/no-unsafe-assignment" = "error"
"@typescript-eslint/no-unsafe-call" = "error"
"@typescript-eslint/no-unsafe-member-access" = "error"
"@typescript-eslint/no-unsafe-return" = "error"

# TypeScript-ESLint - Async/Promise safety
"@typescript-eslint/no-floating-promises" = "error"
"@typescript-eslint/no-misused-promises" = "error"
"@typescript-eslint/await-thenable" = "error"

# TypeScript-ESLint - Exhaustiveness
"@typescript-eslint/switch-exhaustiveness-check" = "error"

# TypeScript-ESLint - Naming conventions
"@typescript-eslint/naming-convention" = [
  "error",
  # Enum members must be UPPER_CASE
  { selector = "enumMember", format = ["UPPER_CASE"] },
  # Types (class, interface, typeAlias, enum, typeParameter) must be PascalCase
  { selector = "typeLike", format = ["PascalCase"] },
  # Variables: camelCase, UPPER_CASE (constants), or PascalCase (builder objects)
  { selector = "variable", format = ["camelCase", "UPPER_CASE", "PascalCase"], leadingUnderscore = "allow", trailingUnderscore = "allow" },
  # Functions must be camelCase
  { selector = "function", format = ["camelCase"] },
  # Parameters: camelCase, allow leading underscore for unused
  { selector = "parameter", format = ["camelCase"], leadingUnderscore = "allow" },
  # Class methods must be camelCase
  { selector = "classMethod", format = ["camelCase"] },
  # Class properties: camelCase or UPPER_CASE
  { selector = "classProperty", format = ["camelCase", "UPPER_CASE"] },
]

# =============================================================================
# Formatting
# =============================================================================

[code.formatting.prettier]
enabled = true

# =============================================================================
# TypeScript Compiler
# =============================================================================

[code.types.tsc]
enabled = true

[code.types.tsc.require]
strict = true
noImplicitAny = true
strictNullChecks = true
noUnusedLocals = true
noImplicitReturns = true
noFallthroughCasesInSwitch = true
esModuleInterop = true
skipLibCheck = true
forceConsistentCasingInFileNames = true

# =============================================================================
# Security
# =============================================================================

[code.security.secrets]
enabled = true

[code.security.pnpmaudit]
enabled = true

# =============================================================================
# Dead Code Detection
# =============================================================================

[code.unused.knip]
enabled = true

# =============================================================================
# Naming Conventions
# =============================================================================

[code.naming]
enabled = true

[[code.naming.rules]]
extensions = ["ts"]
file_case = "kebab-case"
folder_case = "kebab-case"


# =============================================================================
# Disable Comments Detection
# =============================================================================

[code.quality.disable-comments]
enabled = true
